{% if section.blocks.size > 0 %}
{% if section.settings.enable_overlay %}
{% assign section_overlay = 'dt-sc-overlay' %}
{% endif %}

{% case section.settings.background_style %}
{% when 'default' %}
{% when 'parallax' %}
{%- assign background_style = 'data-speed="2"' %}
{% when 'fixed' %}
{%- assign background_style = 'data-speed="1"' %}
{% endcase %} 

{% if section.settings.show_background_image %}
{% assign lazyScript = "lazyload" %}
{% endif %}
  <div class="dt-sc-section-wrapper {{lazyScript}}  {{section_overlay}} {% if section.settings.background_style == 'parallax' %} parallax-initiated{% endif %}" style="{% render 'bg-color-image-padding' %}" data-style="parallax" {{background_style}} {% include 'bg_image' %}>  
    <div class="{% render 'container-settings' %}"> 
      <div class="row {{ section.settings.custom_class_name }}">
        {% render 'section-heading', class: section.id %}         
        <div class="advanced-testimonials-section">
          <div class="dt-sc-testimonial-section advanced-testimonial-content">
            {% for block in section.blocks %}  
            <div class="dt-sc-testimonial style_1">
              <div class="dt-sc-testimonial-content {{section.settings.text_position}}">
                <div class="dt-sc-testimonial-content-inner">
                  <div class="dt-sc-testimonial-quote">{% if block.settings.quote != blank %}{{ block.settings.quote }}{% endif %}</div>
                  <div class="dt-sc-author-rating">
                    {% case block.settings.star %}
                    {% when '0' %}
                    <div class="no-star-rating"></div>
                    {% when '0.5' %}
                    <div class="half-star-rating"></div>
                    {% when '1' %}
                    <div class="one-star-rating"></div>
                    {% when '1.5' %}
                    <div class="one-half-star-rating"></div>
                    {% when '2' %}
                    <div class="two-star-rating"></div>
                    {% when '2.5' %}
                    <div class="two-half-star-rating"></div>
                    {% when '3' %}
                    <div class="three-star-rating"></div>
                    {% when '3.5' %}
                    <div class="three-half-star-rating"></div>
                    {% when '4' %}
                    <div class="four-star-rating"></div>
                    {% when '4.5' %}
                    <div class="four-half-star-rating"></div>
                    {% when '5' %}
                    <div class="five-star-rating"></div>
                    {% endcase %}
                  </div>
                  {% if block.settings.author != blank  or  block.settings.job != blank %}
                  <div class="dt-sc-author-info {{ section.settings.author_info_style }}">
                    <cite>{{block.settings.author}}<span>{{block.settings.job}}</span></cite>
                  </div>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}       
          </div>         
          <div class="advanced-testimonial-gallery">          
            {% for block in section.blocks %}              
            <div class="dt-sc-testimonial-image">            
              {%- assign img_url = block.settings.icon | img_url: '1x1' | replace: '_1x1.', '_{width}x.' -%}
              <img class="lazyload"
                   data-src="{{ img_url }}"
                   data-widths="[180, 360, 470, 600, 770, 970, 1060, 1280, 1512, 1728, 2048]"
                   data-aspectratio="{{ block.settings.icon.aspect_ratio }}"
                   data-sizes="auto"            
                   alt="{{ block.settings.title }}">            
              <noscript>
                {{ block.settings.icon_image | img_url: '480x480', scale: 2 | img_tag: block.settings.icon.alt, 'dt-sc-noscript-image' }}
              </noscript>
            </div>             
            {% endfor %}          
          </div>
        </div>
      </div>
    </div>
  </div>

{% endif %}

<style>

  #shopify-section-{{section.id}}.home-advaned-testimonial .dt-sc-heading .dt-sc-main-heading { color: var(--DTColor_Heading); color:{{ section.settings.section_heading_color }}; } 
  #shopify-section-{{section.id}}.home-advaned-testimonial .dt-sc-heading .dt-sc-sub-heading { color: var(--DTColor_Heading); color:{{ section.settings.section_sub_heading_color }}; } 
  #shopify-section-{{section.id}}.home-advaned-testimonial .dt-sc-heading .dt-sc-heading-description { color: var(--DTColor_Body); color:{{ section.settings.section_description_color }}; } 
  #shopify-section-{{section.id}}.home-advaned-testimonial .dt-sc-heading .dt-sc-btn { 
    background: var(--DT_Button_BG_Color); background:{{ section.settings.section_button_bg_color }}; 
      color: var(--DT_Button_Text_Color); color:{{ section.settings.section_button_text_color }}; }
  #shopify-section-{{section.id}}.home-advaned-testimonial .dt-sc-heading .dt-sc-btn:hover { 
    background: var(--DT_Button_BG_Hover_Color);  background:{{ section.settings.section_button_hover_bg_color }}; 
      color: var(--DT_Button_Text_Hover_Color); color:{{ section.settings.section_button_hover_text_color }}; }

  #shopify-section-{{section.id}}.home-advaned-testimonial .dt-sc-overlay:before { 
    color: var(--DTTertiaryColor); 
      color: {{ section.settings.background_color }};    
      background: currentcolor; 
      opacity: {{ section.settings.overlay_transparency }}; }
  
  #shopify-section-{{section.id}}.home-advanced-testimonial .dt-sc-testimonial-image.slick-slide  {opacity:0.5;}
  #shopify-section-{{section.id}}.home-advanced-testimonial .dt-sc-testimonial-image.slick-slide.slick-current.slick-active.slick-center {opacity:1;}
</style>
<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.css"/>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/slick-carousel@1.8.1/slick/slick.min.js"></script>
<script type="text/javascript">
  $(document).ready(function() {  
    
     $('#shopify-section-{{section.id}} .advanced-testimonial-content').slick({
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        fade: false,
        asNavFor: '#shopify-section-{{section.id}} .advanced-testimonial-gallery'
      });

      $('#shopify-section-{{section.id}} .advanced-testimonial-gallery').slick({
        slidesToShow: {{ section.settings.items_per_view }},
        slidesToScroll: 1,
        asNavFor: '#shopify-section-{{section.id}} .advanced-testimonial-content',
        {%- if section.settings.dots -%}
        dots: false,
        {%- endif -%}
        {%- if section.settings.arrows -%}
        arrows: true,
        {%- endif -%}
        centerMode: true,
        focusOnSelect: true,
        responsive: [
          {
            breakpoint: 992,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3,
              dots: true,
            }},
          {
            breakpoint: 768,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 3
            }},
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }}
        ]
      });
    });

</script>

{% schema %}
{
"name": "Advanced Testimonial",
"class": "index-section home-advanced-testimonial",
"max_blocks":8,
"settings": [
{
"type": "checkbox",
"id": "full",
"label": "Show Full width"
},
{
"type": "checkbox",
"id": "spacing_both_ends",
"label": "Enable Right & Left Spacing (Works only on Fullwidth)",
"default": false
},
{
"type": "text",
"id": "padding",
"label": "Style value (Padding)",
"default":"0,0",
"info":"Top(px),Bottom(px)"
},
{
"type": "text",
"id": "margin",
"label": "Style value (Margin)",
"default":"0,0",
"info":"Top(px),Bottom(px)"
},
{
"type": "checkbox",
"id": "show_background_image",
"label": "Enable Background image"
},
{
"type": "image_picker",
"id": "background_image",
"label": "Background image",
"info": "Size: 1920x1280"
},
{
"type": "select",
"id": "background_style",
"label": "Background Style",
"default": "default",
"options": [
{
"value": "default",
"label": "Default"
},
{
"value": "parallax",
"label": "Parallax"
},
{
"value": "fixed",
"label": "Fixed"
}
]
},
{
"type": "checkbox",
"id": "enable_overlay",
"label": "Enable Background Color (Used as Background Image Overlay Color too)"
},
{
"type": "color",
"id": "background_color",
"label":"Background color"
},
{
"type": "text",
"id": "overlay_transparency",
"label": "Overlay Transparency (0.01 to 1)",
"default": "0.5"
},
{
"type": "text",
"id": "section_heading",
"label": "Main Heading",
"default": "Testimonials"
},  
{
"type": "text",
"id": "section_sub_heading",
"label": "Sub Heading",
"default": "Sub Heading"
},  
{
"type": "text",
"id": "section_description",
"label": "Description",
"default": "Use this text to share the information which you like!."
},  
{
"type": "text",
"id": "section_button_text",
"label": "Link text"
},
{
"type": "url",
"id": "section_button_link",
"label": "Link URL"
},
{
"type": "header",
"content": "Section Color settings"
},
{
"type": "color",
"id": "section_heading_color",
"label": "Heading color"
},    
{
"type": "color",
"id": "section_sub_heading_color",
"label": "Sub heading color"
},   
{
"type": "color",
"id": "section_description_color",
"label": "Description color"
},  
{
"type": "color",
"id": "section_button_bg_color",
"label": "Button bg color"
},   
{
"type": "color",
"id": "section_button_text_color",
"label": "Button text color"
},   
{
"type": "color",
"id": "section_button_hover_bg_color",
"label": "Button hover bg color"
},   
{
"type": "color",
"id": "section_button_hover_text_color",
"label": "Button hover text color"
},
{
"type": "select",
"id": "heading_position",
"label": "Heading Position",
"options": [
{
"value": "text-center",
"label": "Center"
},
{
"value": "text-start",
"label": "Left"
},
{
"value": "text-end",
"label": "Right"
}
]
},
{
"type": "header",
"content": "Testimonial Settings"
},
{
"type": "select",
"id": "text_position",
"label": "Testimonial Text alignment",
"options": [
{
"value": "text-center",
"label": "Center"
},
{
"value": "text-start",
"label": "Left"
},
{
"value": "text-end",
"label": "Right"
}
],
"default": "text-start"
},
{
"type": "image_picker",
"id": "quote_icon",
"label": "Quote Icon"      
},

{
"type": "select",
"id": "author_info_style",
"label": "Author Info Style",
"options": [
{
"value": "style_1",
"label": "Inline"
},
{
"value": "style_2",
"label": "Block"
}
],
"default": "style_2"
},
{
"type": "text",
"id": "border_radius",
"label": "Author Image Radius (in px) - Set 50% for Rounded Image",
"default":"0px"
},
{
"type": "text",
"id": "boxed_border_radius",
"label": "Content Border Radius - Leave empty for Theme Default Border Radius",
"default":"0",
"info": "Unit not Needed"
},
{
"type": "text",
"id": "column_gap",
"label": "Column Gap - Leave Empty for Theme Default Gap",
"default":"30",
"info": "Units not needed"
},

{
"type": "header",
"content": "Testimonial Color settings"
},
{
"type": "color",
"id": "testimonial_border_color",
"label": "Border color (Only for Boxed Styles)"
},
{
"type": "color",
"id": "testimonial_background_color",
"label": "Background color (Only for Boxed Styles)"
},
{
"type": "color",
"id": "testimonial_content_color",
"label": "Content Color"
},
{
"type": "color",
"id": "testimonial_review_color",
"label": "Review Stars Color"
},
{
"type": "color",
"id": "testimonial_author_text_color",
"label": "Author Text Color"
},
{
"type": "color",
"id": "testimonial_author_designation_color",
"label": "Author Designation Color"
},
{
"type": "color",
"id": "testimonial_author_separator_color",
"label": "Testimonial Author Separator Color"
},
{
"type": "color",
"id": "testimonial_quote_icon_color",
"label": "Quote Icon Color"
},
{
"type": "header",
"content": "Carousel Settings"
},

{
"type": "range",
"id": "items_per_view",
"label": "Slide per row",
"min": 1,
"max": 5,
"step": 2,
"default": 5
},
{
"type": "checkbox",
"id": "dots",
"label": "Enable Carousel Pagination",
"default": true
},
{
"type": "checkbox",
"id": "arrows",
"label": "Enable Navigation Arrows",
"default": true
}
],
"blocks": [
{
"type": "content",
"name": "Content",        
"settings": [
{
"type": "richtext",
"id": "quote",
"label": "Text",
"info": "Best results if text does not exceed 400 characters",
"default": "<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type.</p>"
},
{
"type": "image_picker",
"id": "icon",
"label": "Author Image"          
},
{
"type": "text",
"id": "author",
"label": "Author",
"default": "Author Name"
},
{
"type": "text",
"id": "job",
"label": "Designation",
"default": "Author Designation"
},
{
"type": "select",
"id": "star",
"label": "rating",
"default": "3",
"options": [
{
"value": "0",
"label": "0"
},
{
"value": "0.5",
"label": "0.5"
},
{
"value": "1",
"label": "1"
},
{
"value": "1.5",
"label": "1.5"
},
{
"value": "2",
"label": "2"
},
{
"value": "2.5",
"label": "2.5"
},
{
"value": "3",
"label": "3"
},
{
"value": "3.5",
"label": "3.5"
},
{
"value": "4",
"label": "4"
},
{
"value": "4.5",
"label": "4.5"
},
{
"value": "5",
"label": "5"
}
]
}
]
}
],
"presets": [
{
"name": "Advanced Testimonial",
"category": "Client sections",
"blocks": [
{
"type": "content"
}
]
}
]
}
{% endschema %}